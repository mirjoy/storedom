<%= cache(cache_key_for(Order)) do  %>
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <%= cache(action: :index, action_suffix: :order_count) do %>
        <h1><%= @orders.count %> Orders</h1>
        <% end %>
      </div>
    </div>
    <div class="row"></div>
    <% @orders.each do |order| %>
      <%= cache(order) do %>
        <div class="col-sm-12">
          <h2>Order <%= order.id %></h2>
          <h5>Client: <%= order.user.name %></h5>
          <h5>Order Items</h5>
          <% order.items.each_with_index do |item, index| %>
            <p>
              <%= "#{index + 1}. #{item.name}" %>
            </p>
          <% end %>
        </div>
      <% end  %>
    <% end %>
  </div>
<% end %>
